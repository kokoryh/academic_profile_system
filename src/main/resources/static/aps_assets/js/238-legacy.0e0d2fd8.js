"use strict";(self["webpackChunkaminer_demo"]=self["webpackChunkaminer_demo"]||[]).push([[238],{11238:function(e,o,t){t.r(o),t.d(o,{default:function(){return g}});var a=function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",[t("el-dialog",{attrs:{visible:e.dialogVisible,width:"480px","close-on-click-modal":!1},on:{"update:visible":function(o){e.dialogVisible=o},close:e.close}},[t("div",{staticClass:"content"},[t("el-tabs",[t("el-tab-pane",{attrs:{label:e.$t("layout.loginDialog.accountLogin")}},[t("el-form",{ref:"accountForm",attrs:{model:e.accountForm,rules:e.accountRules}},[t("el-form-item",{attrs:{prop:"username"}},[t("el-input",{attrs:{placeholder:e.$t("layout.loginDialog.accountPlaceholder")},on:{input:e.handleAccountForm},model:{value:e.accountForm.username,callback:function(o){e.$set(e.accountForm,"username",o)},expression:"accountForm.username"}})],1),t("el-form-item",{attrs:{prop:"password"}},[t("el-input",{attrs:{placeholder:e.$t("layout.loginDialog.passwordPlaceholder"),type:"password"},on:{input:e.handleAccountForm},nativeOn:{keyup:function(o){return!o.type.indexOf("key")&&e._k(o.keyCode,"enter",13,o.key,"Enter")?null:e.handleAccountLogin.apply(null,arguments)}},model:{value:e.accountForm.password,callback:function(o){e.$set(e.accountForm,"password",o)},expression:"accountForm.password"}})],1)],1),t("el-button",{class:e.accountCanLogin?"login-active":"button-not-active",staticStyle:{width:"100%","margin-top":"10px",height:"46px","font-weight":"700","font-size":"18px"},attrs:{disabled:!e.accountCanLogin},nativeOn:{click:function(o){return e.handleAccountLogin.apply(null,arguments)}}},[e._v(" "+e._s(e.$t("layout.loginDialog.login"))+" ")]),t("el-row",{staticClass:"first-row"},[t("el-col",[t("el-checkbox",{on:{change:e.handleAgreeChange},model:{value:e.agree,callback:function(o){e.agree=o},expression:"agree"}},[t("div",{staticClass:"check-info"},[t("i18n",{attrs:{path:"layout.loginDialog.agree",tag:!1},scopedSlots:e._u([{key:"policy",fn:function(){return[t("a",{attrs:{href:"",target:"_blank"}},[e._v(e._s(e.$t("layout.loginDialog.policy")))])]},proxy:!0},{key:"contact",fn:function(){return[t("a",{attrs:{href:"",target:"_blank"}},[e._v(e._s(e.$t("layout.loginDialog.contact")))])]},proxy:!0}])})],1)]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.showAgreeError,expression:"showAgreeError"}],staticClass:"agree-error"},[e._v(" "+e._s(e.$t("layout.loginDialog.agreeError"))+" ")])],1)],1),t("el-row",{attrs:{gutter:24}},[t("el-col",{attrs:{span:9}},[t("el-checkbox",{model:{value:e.accountForm.keepLogin,callback:function(o){e.$set(e.accountForm,"keepLogin",o)},expression:"accountForm.keepLogin"}},[e._v(e._s(e.$t("layout.loginDialog.keepLogin")))])],1),t("el-col",{staticStyle:{display:"flex","justify-content":"flex-end","font-size":"12px"},attrs:{span:15}},[t("div",{staticClass:"pwd-group"},[t("a",{attrs:{href:""}},[e._v(e._s(e.$t("layout.loginDialog.forget")))]),t("a",{attrs:{href:""}},[e._v(e._s(e.$t("layout.loginDialog.register")))])])])],1),t("div",{staticClass:"others"},[e._v(" "+e._s(e.$t("layout.loginDialog.others"))+" ")])],1),t("el-tab-pane",{attrs:{label:e.$t("layout.loginDialog.SMSLogin")}},[t("el-form",{ref:"SMSForm",attrs:{model:e.SMSForm,rules:e.SMSRules}},[t("el-form-item",{attrs:{prop:"phoneNumber"}},[t("el-input",{staticClass:"phone-inner",attrs:{placeholder:e.$t("layout.loginDialog.phonePlaceholder")},on:{input:e.handleSMSForm},model:{value:e.SMSForm.phoneNumber,callback:function(o){e.$set(e.SMSForm,"phoneNumber",o)},expression:"SMSForm.phoneNumber"}},[t("el-select",{attrs:{slot:"prepend"},slot:"prepend",model:{value:e.SMSForm.phoneArea,callback:function(o){e.$set(e.SMSForm,"phoneArea",o)},expression:"SMSForm.phoneArea"}},[t("el-option",{attrs:{label:"中国大陆(+86)",value:"+86"}})],1)],1)],1),t("el-form-item",{attrs:{prop:"code"}},[t("el-row",{attrs:{gutter:8}},[t("el-col",{attrs:{span:14}},[t("el-input",{attrs:{placeholder:e.$t("layout.loginDialog.codePlaceholder")},on:{input:e.handleSMSForm},nativeOn:{keyup:function(o){return!o.type.indexOf("key")&&e._k(o.keyCode,"enter",13,o.key,"Enter")?null:e.handleAccountLogin.apply(null,arguments)}},model:{value:e.SMSForm.code,callback:function(o){e.$set(e.SMSForm,"code",o)},expression:"SMSForm.code"}})],1),t("el-col",{attrs:{span:10}},[t("el-button",{class:e.hasValidPhone?"send-active":"button-not-active",staticStyle:{width:"100%"},attrs:{disabled:!e.hasValidPhone},nativeOn:{click:function(o){return e.handleSMSLogin.apply(null,arguments)}}},[e._v(" "+e._s(e.$t("layout.loginDialog.send"))+" ")])],1)],1)],1)],1),t("el-button",{class:e.SMSCanLogin?"login-active":"button-not-active",staticStyle:{width:"100%",height:"46px","margin-top":"10px","font-weight":"700","font-size":"18px"},attrs:{disabled:!e.SMSCanLogin},nativeOn:{click:function(o){return e.handleSMSLogin.apply(null,arguments)}}},[e._v(" "+e._s(e.$t("layout.loginDialog.login"))+" ")]),t("el-row",{staticClass:"first-row"},[t("el-col",[t("el-checkbox",{on:{change:e.handleAgreeChange},model:{value:e.agree,callback:function(o){e.agree=o},expression:"agree"}},[t("div",{staticClass:"check-info"},[t("i18n",{attrs:{path:"layout.loginDialog.agree",tag:!1},scopedSlots:e._u([{key:"policy",fn:function(){return[t("a",{attrs:{href:"",target:"_blank"}},[e._v(e._s(e.$t("layout.loginDialog.policy")))])]},proxy:!0},{key:"contact",fn:function(){return[t("a",{attrs:{href:"",target:"_blank"}},[e._v(e._s(e.$t("layout.loginDialog.contact")))])]},proxy:!0}])})],1)]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.showAgreeError,expression:"showAgreeError"}],staticClass:"agree-error"},[e._v(" "+e._s(e.$t("layout.loginDialog.agreeError"))+" ")])],1)],1),t("el-row",{attrs:{gutter:24}},[t("el-col",{attrs:{span:9}},[t("el-checkbox",{model:{value:e.SMSForm.keepLogin,callback:function(o){e.$set(e.SMSForm,"keepLogin",o)},expression:"SMSForm.keepLogin"}},[e._v(e._s(e.$t("layout.loginDialog.keepLogin")))])],1),t("el-col",{staticStyle:{display:"flex","justify-content":"flex-end","font-size":"12px"},attrs:{span:15}},[t("div",{staticClass:"pwd-group"},[t("a",{attrs:{href:""}},[e._v(e._s(e.$t("layout.loginDialog.forget")))]),t("a",{attrs:{href:""}},[e._v(e._s(e.$t("layout.loginDialog.register")))])])])],1),t("div",{staticClass:"others"},[e._v(" "+e._s(e.$t("layout.loginDialog.others"))+" ")])],1)],1)],1)])],1)},n=[];t(74916),t(77601),t(41539);function r(e){var o=/^1[3-9]\d{9}$/;return o.test(e)}var l=t(70777),i={name:"LoginDialog",computed:{accountRules:function(){return{username:[{required:!0,message:this.$t("layout.loginDialog.accountPlaceholder"),trigger:"blur"}],password:[{required:!0,message:this.$t("layout.loginDialog.passwordError"),trigger:"blur"}]}},SMSRules:function(){return{phoneNumber:[{required:!0,message:this.$t("layout.loginDialog.phoneError"),trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:this.$t("layout.loginDialog.phoneError2"),trigger:"change"}],code:[{required:!0,message:this.$t("layout.loginDialog.codeError"),trigger:"blur"},{min:6,max:6,message:this.$t("layout.loginDialog.codeError2"),trigger:"change"}]}}},data:function(){return{dialogVisible:!1,accountForm:{username:"",password:"",keepLogin:!1},SMSForm:{phoneArea:"+86",phoneNumber:"",code:"",keepLogin:!1},accountCanLogin:!1,hasValidPhone:!1,SMSCanLogin:!1,agree:!1,showAgreeError:!1}},watch:{"$store.getters.needLogin":{handler:function(e){!0===e&&this.showDialog()}}},methods:{showDialog:function(){this.dialogVisible=!0},handleAccountForm:function(){var e=this;this.$refs.accountForm.validate((function(o){e.accountCanLogin=o}))},handleSMSForm:function(){this.hasValidPhone=r(this.SMSForm.phoneNumber),this.SMSCanLogin=this.hasValidPhone&&6===this.SMSForm.code.length},handleAgreeChange:function(e){this.showAgreeError=!e},handleAccountLogin:function(){var e=this;this.agree?this.$refs.accountForm.validate((function(o){if(!o)return!1;e.$store.dispatch("user/login",e.accountForm).then((function(){e.resetForm()}))})):this.showAgreeError=!0},handleSMSLogin:function(){this.agree?l.b.error(this.$t("layout.loginDialog.SMSNotOpen")):this.showAgreeError=!0},resetForm:function(){Object.assign(this.$data,this.$options.data()),this.$refs.accountForm.clearValidate(),this.$refs.SMSForm.clearValidate()},close:function(){this.resetForm(),this.$store.commit("user/SWITCH_STATUS")}}},s=i,c=t(1001),u=(0,c.Z)(s,a,n,!1,null,"b80bb1cc",null),g=u.exports}}]);